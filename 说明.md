工具说明

目标
用天勤 tqsdk 或通达信行情接口或导出的行情文件作为输入，自动计算交易信号，只在“新信号”时提醒，人工确认下单。

整体流程
tqsdk 或通达信行情接口或导出文件作为行情来源
Python 定时读取行情
计算趋势/仓位/止损/止盈/支撑压力
出现新信号时提醒
人工确认下单

你需要做的准备
默认使用 tqsdk 接口
如需用通达信接口或文件方式，保持导出路径固定，例如
D:\tdx_data\RB_daily.csv
D:\tdx_data\RB_60min.csv
不关闭通达信，导出的文件会自动刷新

运行方式
单次读取单周期（tqsdk 默认）
python main.py --once --symbol RB

单次读取双周期（tqsdk 默认）
python main.py --once --symbol RB --period 1d --period-2 60m

指定合约（tqsdk）
python main.py --once --symbol RB2605

指定行情源（通达信接口）
python main.py --once --source tdx --symbol RB

指定市场编号（通达信接口）
python main.py --once --symbol RB --tdx-market 60

tqsdk 账号配置（环境变量）
setx TQ_USERNAME your_username
setx TQ_PASSWORD your_password

单次读取单周期（文件）
python main.py --once --source file --csv-path "D:\tdx_data\RB_daily.csv" --symbol RB

单次读取双周期（文件）
python main.py --once --source file --csv-path-daily "D:\tdx_data\RB_daily.csv" --csv-path-60 "D:\tdx_data\RB_60min.csv" --symbol RB

定时轮询（tqsdk）
python main.py --interval 3600 --symbol RB

弹窗提醒
python main.py --once --symbol RB --popup

Webhook 提醒
python main.py --once --symbol RB --webhook "https://your.webhook.url"

调试模式
python main.py --once --symbol RB --debug

信号字段解释
方向：趋势判断的结果，多/空/观望
入场：当前价格
止损：ATR × 倍数计算的止损位
止盈：止损距离 × 倍数计算的止盈位
手数：按账户资金与风险比例自动计算
风险：手数 × 单手风险
支撑：近N根K线最低价
压力：近N根K线最高价
依据：当前策略名称

新信号机制
信号会写入 signal_state.json
只有当信号内容发生变化时才提醒

常见参数
--source file|tdx|tq 数据来源（默认 tq）
--symbol 合约或品种名（RB/FG 自动识别主力合约）
--period/--period-2 周期（1m/5m/15m/30m/60m/1d）
--tdx-host/--tdx-port 行情服务器地址
--tdx-market 市场编号
--tdx-count 拉取K线数量
--tq-symbol tqsdk 合约
--tq-count tqsdk 拉取K线数量
--tq-username tqsdk 用户名
--tq-password tqsdk 密码
--equity 资金规模
--risk-pct 单次风险比例
--contract-multiplier 合约乘数
--fast/--slow 均线周期
--atr ATR周期
--stop-mult 止损倍数
--tp-mult 止盈倍数
--sr-lookback 支撑压力回看根数

示例输出
【RB 波段信号】
方向：多
入场：3521
止损：3491
手数：2
风险：980
止盈：3581
支撑：3480
压力：3560
依据：EMA20/60
